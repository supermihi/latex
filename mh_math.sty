%% mh_math -- some useful general math definitions.
%% Copyright 2013 by Michael Helmling
%% Newest version: github.com/supermihi/latex
%% Feel free to use and modify to your wish!

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mh_math}

\RequirePackage{etoolbox}

\newtoggle{unimath}
\DeclareOption{unimath}{
  \toggletrue{unimath}
}

\providetoggle{mh_myfonts}
\toggletrue{mh_myfonts}
\DeclareOption{nofonts}{
  \togglefalse{mh_myfonts}
}

\ProcessOptions\relax

\RequirePackage{iftex}
\RequirePackage{amsfonts,amsmath,amssymb}
\iftoggle{unimath}{
  \RequirePackage{unicode-math}
}{}
\iftoggle{mh_myfonts}{
  \ifPDFTeX
    \RequirePackage{eulervm}
  \else
    \iftoggle{unimath}{
      \setmathfont[StylisticSet=0]{XITS Math} 
    }{
      \RequirePackage{eulervm}
    }
  \fi
}{}

\RequirePackage{mathtools}
\RequirePackage{xspace}

% Useful math abbreviations
\newcommand{\Z}{\mathbb{Z}} % integrals
\newcommand{\Q}{\mathbb{Q}} % fractions
\newcommand{\N}{\mathbb{N}} % integers
\newcommand{\R}{\mathbb{R}} % reals
\def\C{\mathbb{C}} % complex numbers
\newcommand{\F}{\mathbb{F}} % finite fields
\renewcommand{\O}{\mathcal{O}} % Landau notation
\newcommand{\E}{\mathbb{E}} % Expectation
\newcommand{\NP}{{\sffamily NP}} % NP complexity class
\renewcommand{\P}{{\sffamily P}} % P complexity class
\newcommand{\Llra}{\Longleftrightarrow}

% Commands with size-adjusting braces
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert} % absolute value
\newcommand{\norm}[1]{\left\| #1 \right\|} % norms
\newcommand{\legendre}[2]{\left(\frac{#1}{#2}\right)} % Legendre symbol (fraction in parentheses)
\newcommand{\gauss}[1]{\left\lfloor #1 \right\rfloor} % Gauss operator (floor)

% Text mode punctuation in display formulas
\newcommand\tp{\text{.}}
\newcommand\tk{\text{,}}
\newcommand\ts{\text{;}}

% := with vertically centered colon (requires mathtools)
\newcommand\definedAs{\vcentcolon=} 

\newcommand{\algname}[1]{\textsc{#1}} % name of algorithms in small caps

% Math operators
\newcommand{\op}[1]{\operatorname{#1}} % handy abbreviation
\DeclareMathOperator{\ggT}{ggT}
\DeclareMathOperator{\kgV}{kgV}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator{\conv}{conv}
\DeclareMathOperator{\aff}{aff}
\DeclareMathOperator{\eq}{eq}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\spn}{span}
